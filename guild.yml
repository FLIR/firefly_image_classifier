- model: train
  description: Train an image classifier
  operations:
    train:
      description: Retrain a classifier
      main: train
      output-scalars:
        - 'global step (?P<step>\step): loss = (?P<loss>\value)'
        - 'global step (?P<step>\step): evaluation accuracy = (?P<accuracy>\value)'
        - experiment_number: 'experiment number: (\value)'
      flags:
        batch_size:
          type: int
          default: 32
        num_of_trainable_layers:
          type: int
          default: 1
          choices: [1, 2, 3, 4]
        max_number_of_steps:
          type: int
          default: 500
        project_name:
          type: string
          default: ''
        dataset_name:
          type: string
          default: ''
        image_dir:
          type: string
          default: ''
        learning-rate:
          type: float
          default: 0.001
        model_name:
          type: string
          default: 'mobilenet_v1'
          choices: ["mobilenet_v1", "mobilenet_v1_075", "mobilenet_v1_050", "mobilenet_v1_025", "inception_v1"]
        optimizer:
          type: string
          default: "adam"
        min_object_covered:
          type: float
          default: 0.9
      requires:
        - file: imagenet_checkpoints
        - file: project_dir

  sourcecode:
    - '*.py'
